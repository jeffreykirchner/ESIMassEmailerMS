from main.views import take_and_send_incoming_email
from django.contrib.auth.models import User

from main.models import Parameters

from main.globals import MailSystem

data = {'user_list': [{'email': 'kirchner@chapman.edu', 'variables': [{'name': 'first name', 'text': 'Jeffrey'}, {'name': 'last name', 'text': 'Kirchner'}, {'name': 'email', 'text': 'kirchner@chapman.edu'}, {'name': 'recruiter id', 'text': '14681'}, {'name': 'student id', 'text': None}]}], 'message_subject': 'You are invited to an experiment by the Economic Science Institute on 08/10/2022 12:01 PM US/Pacific .', 'message_text': '[first name],\r\nYou are invited to an experiment by the Economic Science Institute. Please read the entire email carefully.\r\nThis experiment will pay earnings electronically. A PayPal account is required to participate in this experiment. You will be paid to your Chapman email address. Participation in this study is completely voluntary. If you do not wish to participate or to be paid via PayPal, please do not participate in this research experiment.\r\nThe experiment will take place on: 08/10/2022 12:01 PM US/Pacific \r\nThe length of the experiment is: 1hr  10mins\r\nCheck-in at: Wilkinson Hall 111 (the main corridor)\r\nThe on-time bonus is: $7.00\r\nPlease arrive 10 minutes early.\r\n***A valid Chapman ID is required to participate in experiments. Your fellow students are counting on you to show up. Any student who twice fails to show up for a confirmed experiment will be removed from the system. In order to participate, you must be proficient in English. ***\r\nTo confirm your presence at the session, follow this link: http://localhost:8000 \r\nIf you do not wish to attend, no action is required.\r\nYou may contact us with questions at the following address: luetje@chapman.edu\r\nESI is following the Chapman COVID Guidelines. Thank you for your time and willingness to participate in our experiments.\r\nTo unsubscribe from future invitations, pause your account: http://localhost:8000/profile/', 'message_text_html': '<p>[first name],</p>\r\n<p>You are invited to an experiment by the Economic Science Institute. Please read the entire email carefully.</p>\r\n<p>This experiment will pay earnings electronically. A PayPal account is required to participate in this experiment. You will be paid to your Chapman email address. Participation in this study is completely voluntary. If you do not wish to participate or to be paid via PayPal, please do not participate in this research experiment.</p>\r\n<p>The experiment will take place on: <strong>08/10/2022 12:01 PM US/Pacific </strong></p>\r\n<p>The length of the experiment is: <strong>1hr  10mins</strong></p>\r\n<p>Check-in at:<strong> Wilkinson Hall 111 (the main corridor)</strong></p>\r\n<p>The on-time bonus is: $7.00</p>\r\n<p>Please arrive 10 minutes early.</p>\r\n<p>***A valid Chapman ID is required to participate in experiments. Your fellow students are counting on you to show up. Any student who twice fails to show up for a confirmed experiment will be removed from the system. In order to participate, you must be proficient in English. ***</p>\r\n<p>To confirm your presence at the session, follow this link: <a href="http://localhost:8000">http://localhost:8000 </a></p>\r\n<p>If you do not wish to attend, no action is required.</p>\r\n<p>You may contact us with questions at the following address: luetje@chapman.edu</p>\r\n<p>ESI is following the Chapman COVID Guidelines. Thank you for your time and willingness to participate in our experiments.</p>\r\n<p>To unsubscribe from future invitations, pause your account: <a href="http://localhost:8000/profile/">http://localhost:8000/profile/</a></p>', 'memo': 'Manual invitation for session: 11071'}
u = User.objects.first()

p = Parameters.objects.first()
p.mail_system = MailSystem.SEND_GRID
p.save()

take_and_send_incoming_email(u, data, True)